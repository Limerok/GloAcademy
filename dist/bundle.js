(()=>{"use strict";var e,t,n,o,a,r,c,l,u,i,s,d,v,m,f,p,g,h;f=document.getElementById("timer-hours"),p=document.getElementById("timer-minutes"),g=document.getElementById("timer-seconds"),h=setInterval((function(){var e,t={timeRemaining:e=(new Date("21 June 2022").getTime()-(new Date).getTime())/1e3,seconds:Math.floor(e%60),minutes:Math.floor(e/60%60),hours:Math.floor(e/60/60)};f.textContent=t.hours<10?"0"+t.hours:t.hours,p.textContent=t.minutes<10?"0"+t.minutes:t.minutes,g.textContent=t.seconds<10?"0"+t.seconds:t.seconds,t.timeRemaining<0&&(clearInterval(h),f.textContent="00",p.textContent="00",g.textContent="00")}),1e3),v=document.querySelector("body"),m=document.querySelector("menu"),v.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")||t.closest(".close-btn")||t.closest("menu > ul > li")?m.classList.toggle("active-menu"):t.closest("menu")||m.classList.remove("active-menu")})),m.querySelectorAll('a[href^="#"').forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=this.getAttribute("href").substring(1);if("close"!==t&&""!==t){var n=document.getElementById(t).getBoundingClientRect().top-0;window.scrollBy({top:n,behavior:"smooth"})}}))})),l=document.querySelector(".popup"),u=document.querySelector(".popup-content"),i=document.querySelectorAll(".popup-btn"),s=0,d=function e(){c=requestAnimationFrame(e),++s<39?u.style.left=s+"%":(cancelAnimationFrame(c),s=0)},i.forEach((function(e){e.addEventListener("click",(function(){u.style.left=0,l.style.display="block",screen.width>=768&&(c=requestAnimationFrame(d))}))})),l.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?l.style.display="none":(t=t.closest(".popup-content"))||(l.style.display="none")})),o=document.querySelector(".service-header"),a=o.querySelectorAll(".service-header-tab"),r=document.querySelectorAll(".service-tab"),o.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&a.forEach((function(e,n){e===t&&function(e){for(var t=0;t<r.length;t++)e===t?(a[t].classList.add("active"),r[t].classList.remove("d-none")):(a[t].classList.remove("active"),r[t].classList.add("d-none"))}(n)}))})),function(){for(var e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots")),n=document.querySelector(".portfolio-content"),o=0;o<e.length;o++){var a=document.createElement("li");a.classList.add("dot"),t.insertAdjacentElement("beforeend",a)}var r,c=document.querySelectorAll(".dot"),l=0,u=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},s=function(){u(e,l,"portfolio-item-active"),u(c,l,"dot-active"),++l>=e.length&&(l=0),i(e,l,"portfolio-item-active"),i(c,l,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;r=setInterval(s,e)};d(1500),n.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".portfolio-btn, .dot")&&(u(e,l,"portfolio-item-active"),u(c,l,"dot-active"),n.matches("#arrow-left")?l--:n.matches("#arrow-right")?l++:n.matches(".dot")&&c.forEach((function(e,t){e===n&&(l=t)})),l>=e.length?l=0:l<0&&(l=e.length-1),i(e,l,"portfolio-item-active"),i(c,l,"dot-active"))})),n.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(r)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d(1500)}))}(),(n=document.querySelectorAll(".command__photo")).forEach((function(e){e.addEventListener("mouseenter",(function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}))})),n.forEach((function(e){e.addEventListener("mouseleave",(function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}))})),function(){var e=document.querySelectorAll(".calc-item"),t=document.querySelector(".main-form-input"),n=document.getElementById("form3"),o=document.querySelector(".footer-form-input");e.forEach((function(e,t){t>0&&e.addEventListener("input",(function(){e.value=e.value.replace(/[^0-9]/,"")}))}));var a=function(e){var t=e.target;"user_name"===t.name?t.value=t.value.replace(/[^а-яё ]/gi,""):t.closest("#form2-message")?t.value=t.value.replace(/[^а-яё 0-9,.]/gi,""):"user_email"===t.name?t.value=t.value.replace(/[^a-z\-1-9@_.!~*']/gi,""):"user_phone"===t.name&&(t.value=t.value.replace(/^[^0-9\+]/gi,""),t.value=t.value.replace(/^\+?\d{12}/gi,"")),t.addEventListener("blur",(function(){"user_name"===t.name?(t.value=t.value.replace(/\s+/gi," "),t.value=t.value.replace(/-+/gi,"-"),t.value=t.value.replace(/(^\s+|\s+$)/g,""),t.value=t.value.toLowerCase(),t.value=t.value.replace(/(^|\s|-)\S/g,(function(e){return e.toUpperCase()}))):t.closest("#form2-message")?(t.value=t.value.replace(/\s+/gi," "),t.value=t.value.replace(/(^\s+|\s+$)/g,""),t.value=t.value.replace(/(^\.+)/g,""),t.value=t.value.replace(/(^\,+)/g,""),t.value=t.value.replace(/,+/gi,","),t.value=t.value.replace(/\.+/gi,".")):"user_email"===t.name?t.value=t.value.replace(/-+/gi,"-"):"user_phone"===t.name&&(t.value=t.value.replace(/^\++/gi,"+"),t.value=t.value.replace(/\+$/g,""))}))};o.addEventListener("input",(function(e){a(e)})),t.addEventListener("input",(function(e){a(e)})),n.addEventListener("input",(function(e){a(e)}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),c=document.getElementById("total"),l=function(){var t,l=0,u=1,i=1,s=0,d=n.options[n.selectedIndex].value,v=+o.value;r.value>1&&(u+=(r.value-1)/10),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),d&&v&&(l=e*d*v*u*i),t=setInterval((function(){s<=l-1e3&&(c.textContent=s,s+=500),s<=l-100?(c.textContent=s,s+=50):s<=l-10?(c.textContent=s,s+=5):s<=l?(c.textContent=s,s+=1):clearInterval(t)}),.1)};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&l()}))}(100),e=document.querySelectorAll("form"),(t=document.createElement("div")).style.cssText="font-size: 3rem;",t.style.cssText="color: white;",e.forEach((function(e){e.addEventListener("submit",(function(n){var o;n.preventDefault(),e.appendChild(t),t.innerHTML='<img src="../images/loading.gif" style="width:50px;height:auto;">',(o=new FormData(e),fetch("./server.php",{method:"POST",headers:{"Conternt-Type":"application/json"},body:o})).then((function(e){if(200!==e.status)throw new Error("status not 200");t.textContent="Спасибо! Мы скоро с Вами свяжемся."})).catch((function(){t.textContent="Что то пошло не так"})),function(e){e.querySelectorAll("input").forEach((function(e){e.value=""}))}(e)}))}))})();