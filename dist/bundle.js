(()=>{"use strict";var e,t,n,o,a,r,c,l,u,i,s,d,v,m;s=document.getElementById("timer-hours"),d=document.getElementById("timer-minutes"),v=document.getElementById("timer-seconds"),m=setInterval((function(){var e,t={timeRemaining:e=(new Date("09 July 2021").getTime()-(new Date).getTime())/1e3,seconds:Math.floor(e%60),minutes:Math.floor(e/60%60),hours:Math.floor(e/60/60)};s.textContent=t.hours<10?"0"+t.hours:t.hours,d.textContent=t.minutes<10?"0"+t.minutes:t.minutes,v.textContent=t.seconds<10?"0"+t.seconds:t.seconds,t.timeRemaining<0&&(clearInterval(m),s.textContent="00",d.textContent="00",v.textContent="00")}),1e3),function(){var e=document.querySelector("body"),t=document.querySelector("menu"),n=document.querySelector("main");e.addEventListener("keydown",(function(e){"Escape"===e.code&&t.classList.remove("active-menu")})),e.addEventListener("click",(function(e){var n=e.target;n.closest(".menu")||n.closest(".close-btn")||n.closest("menu > ul > li > a")?t.classList.toggle("active-menu"):n.closest("menu")||t.classList.remove("active-menu")}));var o=function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=this.getAttribute("href").substring(1);if("close"!==t&&""!==t){var n=document.getElementById(t).getBoundingClientRect().top-0;window.scrollBy({top:n,behavior:"smooth"})}}))};n.querySelectorAll('a[href^="#"').forEach(o),t.querySelectorAll('a[href^="#"').forEach(o)}(),r=document.querySelector(".popup"),c=document.querySelector(".popup-content"),l=document.querySelectorAll(".popup-btn"),u=0,i=function e(){a=requestAnimationFrame(e),++u<39?c.style.left=u+"%":(cancelAnimationFrame(a),u=0)},l.forEach((function(e){e.addEventListener("click",(function(){r.style.display="block",console.log(window.innerWidth),window.innerWidth>767&&(c.style.left=0,a=requestAnimationFrame(i))}))})),r.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?r.style.display="none":(t=t.closest(".popup-content"))||(r.style.display="none")})),t=document.querySelector(".service-header"),n=t.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab"),t.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&n.forEach((function(e,a){e===t&&function(e){for(var t=0;t<o.length;t++)e===t?(n[t].classList.add("active"),o[t].classList.remove("d-none")):(n[t].classList.remove("active"),o[t].classList.add("d-none"))}(a)}))})),function(){for(var e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots")),n=document.querySelector(".portfolio-content"),o=0;o<e.length;o++){var a=document.createElement("li");a.classList.add("dot"),t.insertAdjacentElement("beforeend",a),0===o&&a.classList.add("dot-active")}var r,c=document.querySelectorAll(".dot"),l=0,u=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},s=function(){u(e,l,"portfolio-item-active"),u(c,l,"dot-active"),++l>=e.length&&(l=0),i(e,l,"portfolio-item-active"),i(c,l,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;r=setInterval(s,e)};d(1500),n.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".portfolio-btn, .dot")&&(u(e,l,"portfolio-item-active"),u(c,l,"dot-active"),n.matches("#arrow-left")?l--:n.matches("#arrow-right")?l++:n.matches(".dot")&&c.forEach((function(e,t){e===n&&(l=t)})),l>=e.length?l=0:l<0&&(l=e.length-1),i(e,l,"portfolio-item-active"),i(c,l,"dot-active"))})),n.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(r)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d(1500)}))}(),(e=document.querySelectorAll(".command__photo")).forEach((function(e){e.addEventListener("mouseenter",(function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}))})),e.forEach((function(e){e.addEventListener("mouseleave",(function(e){var t=e.target.src;e.target.src=e.target.dataset.img,e.target.dataset.img=t}))})),function(){var e=document.querySelectorAll(".calc-item"),t=document.querySelector(".main-form-input"),n=document.getElementById("form3"),o=document.querySelector(".footer-form-input");e.forEach((function(e,t){t>0&&e.addEventListener("input",(function(){e.value=e.value.replace(/[^0-9]/,"")}))}));var a=function(e){var t=e.target;"user_name"===t.name?" "===t.value?t.value=t.value.replace(/[^а-яё]/gi,""):t.value=t.value.replace(/[^а-яё ]/gi,""):t.closest("#form2-message")?t.value=t.value.replace(/[^а-яё 0-9,.]/gi,""):"user_email"===t.name?t.value=t.value.replace(/[^a-z\-1-9@_.!~*']/gi,""):"user_phone"===t.name&&(t.setAttribute("minlength",7),t.setAttribute("maxlength",13),t.value=t.value.replace(/^[^0-9\+]/gi,"")),t.addEventListener("blur",(function(){"user_name"===t.name?(t.value=t.value.replace(/\s+/gi," "),t.value=t.value.replace(/-+/gi,"-"),t.value=t.value.replace(/(^\s+|\s+$)/g,""),t.value=t.value.toLowerCase(),t.value=t.value.replace(/(^|\s|-)\S/g,(function(e){return e.toUpperCase()}))):t.closest("#form2-message")?(t.value=t.value.replace(/\s+/gi," "),t.value=t.value.replace(/(^\s+|\s+$)/g,""),t.value=t.value.replace(/(^\.+)/g,""),t.value=t.value.replace(/(^\,+)/g,""),t.value=t.value.replace(/,+/gi,","),t.value=t.value.replace(/\.+/gi,".")):"user_email"===t.name?t.value=t.value.replace(/-+/gi,"-"):"user_phone"===t.name&&(t.value=t.value.replace(/^\++/gi,"+"),t.value=t.value.replace(/\+$/g,""),"user_phone"===t.name&&t.value.length<7&&(t.value=""))}))};o.addEventListener("input",(function(e){a(e)})),t.addEventListener("input",(function(e){a(e)})),n.addEventListener("input",(function(e){a(e)}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),c=document.getElementById("total"),l=function(){var t,l=0,u=1,i=1,s=0,d=n.options[n.selectedIndex].value,v=+o.value;r.value>1&&(u+=(r.value-1)/10),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),d&&v&&(l=e*d*v*u*i),t=setInterval((function(){s<=l-1e3&&(c.textContent=s,s+=500),s<=l-100?(c.textContent=s,s+=50):s<=l-10?(c.textContent=s,s+=5):s<=l?(c.textContent=s,s+=1):clearInterval(t)}),.1)},u=function(){o.value="",r.value="",a.value=""};t.addEventListener("change",(function(e){var t=e.target;t.matches("input")&&l(),t.matches("select")&&(u(),l())}))}(100),function(){var e=document.querySelector(".popup"),t=document.querySelectorAll("form"),n=document.createElement("div");n.style.cssText="font-size: 3rem;",n.style.cssText="color: white;";var o=function(){e.style.display="none"};t.forEach((function(e){e.addEventListener("submit",(function(t){var a;console.log(e),t.preventDefault(),e.appendChild(n),n.innerHTML='<img src="../images/loading.gif" style="width:50px;height:auto;">',(a=new FormData(e),fetch("./server.php",{method:"POST",headers:{"Conternt-Type":"application/json"},body:a})).then((function(e){if(200!==e.status)throw new Error("status not 200");n.textContent="Спасибо! Мы скоро с Вами свяжемся.",setTimeout(o,2e3)})).catch((function(){n.textContent="Что то пошло не так"})),function(e){e.querySelectorAll("input").forEach((function(e){e.value=""}))}(e)}))}))}()})();